doctype html
html
  head
    title Get Fit
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    link(rel="apple-touch-icon", sizes="180x180", href="/apple-touch-icon.png")
    link(rel="icon", type="image/png", sizes="32x32", href="/favicon-32x32.png")
    link(rel="icon", type="image/png", sizes="16x16", href="/favicon-16x16.png")
    link(rel="manifest", href="/manifest.json")
    link(rel="mask-icon", href="/safari-pinned-tab.svg", color="#5bbad5")
    meta(name="apple-mobile-web-app-title", content="Get Fit")
    meta(name="application-name", content="Get Fit")
    meta(name="theme-color", content="#f0f0f0")
    link(rel='stylesheet', href='/dist/client-styles.css')
    link(href="https://fonts.googleapis.com/css?family=Cormorant+Garamond:600", rel="stylesheet")
  body.flex-body
    nav.navbar.has-shadow.is-light(role="navigation" aria-label="main navigation")
      .container
          .navbar-brand
            a.navbar-item(href='/')
              img(src='/images/gym-near.svg', alt='Description', height=28, width=28)
            .navbar-burger(data-target="navMenu")
              span
              span
              span
          .navbar-menu(id='navMenu')
            .navbar-start
              if user
                //- Make username and partner name sentence case 
                a.navbar-item(href='/overview', class=(routeInfo.route.startsWith('/overview')  ? 'is-active' : false))
                  | Overview
                a.navbar-item(href=`/user`, class=(routeInfo.route.startsWith('/user') ? 'is-active' : false))
                  span#userName #{routeInfo.userName}
                  | &nbsp;
                  span#userPointTally (#{pointTally.user})
                a.navbar-item(href=`/partner`, class=(routeInfo.route.startsWith('/partner') ? 'is-active' : false))
                  span#partnerName #{routeInfo.partnerName}
                  | &nbsp;
                  span#partnerPointTally (#{pointTally.partner})
                //- a.navbar-item(href='/account', class=(routeInfo.route === "/account"  ? 'is-active' : false))
                  | Account
                //- a.navbar-item(href='/help', class=(routeInfo.route === "/help"  ? 'is-active' : false))
                  | Help
            .navbar-end
              span.navbar-item
                .field.is-grouped.has-addons
                  if user
                    .control
                      a.button(href='/account', class=(routeInfo.route.startsWith('/account')  ? 'is-active' : false))
                        span.icon.is-small
                          img.avatar(src=`/images/${user.username}.jpg`, alt=user.username, height='28px', width='28px')
                        | &nbsp;
                        span #{routeInfo.userName}
                        if pendingRequests.length > 0
                          | &nbsp;
                          span.tag(class='is-danger')
                            | #{pendingRequests.length}
                    .control
                      a.button(href="/logout")
                        | Log out
                  else
                    .control
                      a.button(href="/login")
                        | Log in
                    .control
                      a.button(href="/register")
                        | Sign up
    //- Bring in Mixins
    include ../mixins/ExerciseCard
    include ../mixins/HistoryCard
    block page
    script(type='text/javascript', src='/dist/client-bundle.js')
    //- If we're on a page where we need to display the weight chart, load D3 and the data script
    if ['/partner/weight', '/user/weight'].includes(routeInfo.route) 
      //- Load D3 library and my D3 script
      script(type='text/javascript', src='/dist/data-bundle.js')